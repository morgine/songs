(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"455e":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",{attrs:{padding:""}},[t("q-form",{staticClass:"row q-gutter-lg"},[t("q-input",{attrs:{filled:"",label:"开始日期"},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{model:{value:e.params.BeginDate,callback:function(a){e.$set(e.params,"BeginDate",a)},expression:"params.BeginDate"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.params.BeginDate,callback:function(a){e.$set(e.params,"BeginDate",a)},expression:"params.BeginDate"}}),t("q-input",{attrs:{filled:"",label:"结束日期"},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{model:{value:e.params.EndDate,callback:function(a){e.$set(e.params,"EndDate",a)},expression:"params.EndDate"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.params.EndDate,callback:function(a){e.$set(e.params,"EndDate",a)},expression:"params.EndDate"}}),t("q-space"),t("div",{staticClass:"row items-center"},[t("q-btn",{attrs:{label:"获取统计",type:"submit",color:"primary",loading:e.loading},on:{click:e.getStatistics}})],1)],1),e._l(e.dates,(function(a,n){return[t("q-table",{key:"total-"+n,attrs:{title:"总量-"+a.date,data:a.data,columns:e.columns,"row-key":"cumulate_user"},scopedSlots:e._u([{key:"top-right",fn:function(){return[t("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"导出 csv","no-caps":""},on:{click:function(t){return e.exportTable("总量-"+a.date,a.data,e.columns)}}})]},proxy:!0}],null,!0)}),e._l(a.apps,(function(l,s){return[t("q-table",{key:"app-"+n+"-"+s,attrs:{title:"详细-"+a.date,data:l,columns:e.appColumns,"row-key":"appid"},scopedSlots:e._u([{key:"top-right",fn:function(){return[t("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"导出 csv","no-caps":""},on:{click:function(t){return e.exportTable("详细-"+a.date,l,e.appColumns)}}})]},proxy:!0}],null,!0)})]}))]}))],2)},l=[],s=(t("ddb0"),t("bd4c")),o=t("a357");const i=Date.now(),r=864e5,c=s["b"].formatDate(i-r,"YYYY/MM/DD"),p=s["b"].formatDate(i-2*r,"YYYY/MM/DD");function u(e,a){let t=void 0!==a?a(e):e;return t=void 0===t||null===t?"":String(t),t=t.split('"').join('""'),`"${t}"`}var m={name:"Index",data(){const e=[{name:"cumulate_user",label:"用户总量",field:"cumulate_user"},{name:"new_user",label:"新增的用户",field:"new_user"},{name:"cancel_user",label:"取消用户",field:"cancel_user"},{name:"positive_user",label:"净增用户",field:"positive_user"},{name:"cancel_rate",label:"取关率",field:"cancel_rate"},{name:"req_succ_count",label:"拉取量",field:"req_succ_count"},{name:"exposure_count",label:"曝光量",field:"exposure_count"},{name:"exposure_rate",label:"曝光率",field:"exposure_rate"},{name:"click_count",label:"点击量",field:"click_count"},{name:"click_rate",label:"点击率",field:"click_rate"},{name:"outcome",label:"支出",field:"outcome"},{name:"income",label:"收入",field:"income"},{name:"income_outcome_rate",label:"收入支出比率",field:"income_outcome_rate"},{name:"ecpm",label:"广告千次曝光收益",field:"ecpm"}];return{params:{Limit:500,Offset:0,BeginDate:p,EndDate:c},loading:!1,columns:e,appColumns:[{name:"appid",label:"APPID",field:"appid"},{name:"nickname",label:"公众号名称",field:"nickname"},{name:"errs",label:"错误列表",field:"errs"},...e],dates:[]}},methods:{getStatistics(){this.loading=!0,this.$axios.get("/user-statistics",{params:this.params}).then((e=>{e=e.data,e&&e.Data&&(this.dates=e.Data,this.loading=!1)}))},exportTable(e,a,t){const n=[t.map((e=>u(e.label)))].concat(a.map((e=>t.map((a=>u("function"===typeof a.field?a.field(e):e[void 0===a.field?a.name:a.field],a.format))).join(",")))).join("\r\n"),l=Object(o["a"])(`${e}.csv`,n,"text/csv");!0!==l&&this.$q.notify({message:"浏览器阻止下载文件...",color:"negative",icon:"warning"})}}},d=m,f=t("2877"),b=t("9989"),_=t("0378"),v=t("27f9"),g=t("0016"),y=t("7cbe"),D=t("52ee"),k=t("9c40"),q=t("2c91"),x=t("eaac"),h=t("7f67"),w=t("eebe"),C=t.n(w),Q=Object(f["a"])(d,n,l,!1,null,"f99f98f2",null);a["default"]=Q.exports;C()(Q,"components",{QPage:b["a"],QForm:_["a"],QInput:v["a"],QIcon:g["a"],QPopupProxy:y["a"],QDate:D["a"],QBtn:k["a"],QSpace:q["a"],QTable:x["a"]}),C()(Q,"directives",{ClosePopup:h["a"]})}}]);