(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"455e":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",{attrs:{padding:""}},[t("q-form",{staticClass:"row q-gutter-lg"},[t("q-input",{attrs:{filled:"",label:"开始日期"},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{model:{value:e.params.BeginDate,callback:function(a){e.$set(e.params,"BeginDate",a)},expression:"params.BeginDate"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.params.BeginDate,callback:function(a){e.$set(e.params,"BeginDate",a)},expression:"params.BeginDate"}}),t("q-input",{attrs:{filled:"",label:"结束日期"},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{model:{value:e.params.EndDate,callback:function(a){e.$set(e.params,"EndDate",a)},expression:"params.EndDate"}},[t("div",{staticClass:"row items-center justify-end"},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.params.EndDate,callback:function(a){e.$set(e.params,"EndDate",a)},expression:"params.EndDate"}}),t("q-space"),t("div",{staticClass:"row items-center"},[t("q-btn",{attrs:{label:"获取统计",type:"submit",color:"primary",loading:e.loading},on:{click:e.getStatistics}})],1)],1),e._l(e.dates,(function(a,n){return[t("q-table",{key:"total-"+n,attrs:{title:"总量-"+a.date,data:[a.data],columns:e.columns,"row-key":"cumulate_user"},scopedSlots:e._u([{key:"top-right",fn:function(){return[t("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"导出 csv","no-caps":""},on:{click:function(t){return e.exportTable("总量-"+a.date,[a.data],e.columns)}}})]},proxy:!0}],null,!0)}),t("q-table",{key:"app-"+n,attrs:{title:"详细-"+a.date,data:a.apps,columns:e.appColumns,"row-key":"appid"},scopedSlots:e._u([{key:"top-right",fn:function(){return[t("q-btn",{attrs:{color:"primary","icon-right":"archive",label:"导出 csv","no-caps":""},on:{click:function(t){return e.exportTable("详细-"+a.date,a.apps,e.appColumns)}}})]},proxy:!0}],null,!0)})]}))],2)},o=[],l=t("bd4c"),s=t("a357");const i=Date.now(),r=864e5,c=l["b"].formatDate(i-r,"YYYY/MM/DD"),p=l["b"].formatDate(i-2*r,"YYYY/MM/DD");function u(e,a,t){let n=void 0!==t?t(e):e;return n=void 0===n||null===n?"":String(n),n=n.split('"').join('""'),`"${n}"`}var m={name:"Index",data(){const e=[{name:"cumulate_user",label:"用户总量",field:"cumulate_user"},{name:"new_user",label:"新增用户",field:"new_user"},{name:"cancel_user",label:"取消用户",field:"cancel_user"},{name:"positive_user",label:"净增用户",field:"positive_user"},{name:"cancel_rate",label:"取关率",format:e=>`${e.toFixed(3)}%`,field:"cancel_rate"},{name:"req_succ_count",label:"拉取量",field:"req_succ_count"},{name:"exposure_count",label:"曝光量",field:"exposure_count"},{name:"exposure_rate",label:"曝光率",format:e=>`${e.toFixed(3)}%`,field:"exposure_rate"},{name:"click_count",label:"点击量",field:"click_count"},{name:"click_rate",label:"点击率",format:e=>`${e.toFixed(3)}%`,field:"click_rate"},{name:"outcome",label:"支出",field:"outcome"},{name:"income",label:"收入",field:"income"},{name:"income_outcome_rate",label:"收入支出比率",format:e=>`${e.toFixed(3)}%`,field:e=>e.outcome?e.income/e.outcome:0},{name:"ecpm",label:"广告千次曝光收益",field:"ecpm"}];return{params:{Limit:500,Offset:0,BeginDate:p,EndDate:c},loading:!1,columns:e,appColumns:[{name:"appid",label:"APPID",field:"appid"},{name:"nickname",label:"公众号名称",field:"nickname"},{name:"errs",label:"错误列表",format:(e,a)=>`${e.join("\n")}`,field:"errs"}].concat(e),dates:[]}},methods:{getStatistics(){this.loading=!0,this.$axios.get("/user-statistics",{params:this.params}).then((e=>{e=e.data,e&&e.Data&&(this.dates=e.Data,this.loading=!1)}))},exportTable(e,a,t){console.log(a);const n=[t.map((e=>u(e.label)))].concat(a.map((e=>t.map((a=>u("function"===typeof a.field?a.field(e):e[void 0===a.field?a.name:a.field],a.format))).join(",")))).join("\r\n"),o=Object(s["a"])(`${e}.csv`,n,"text/csv");!0!==o&&this.$q.notify({message:"浏览器阻止下载文件...",color:"negative",icon:"warning"})}}},d=m,f=t("2877"),b=t("9989"),_=t("0378"),g=t("27f9"),v=t("0016"),x=t("7cbe"),y=t("52ee"),D=t("9c40"),k=t("2c91"),q=t("eaac"),h=t("7f67"),w=t("eebe"),$=t.n(w),C=Object(f["a"])(d,n,o,!1,null,"6be99a6a",null);a["default"]=C.exports;$()(C,"components",{QPage:b["a"],QForm:_["a"],QInput:g["a"],QIcon:v["a"],QPopupProxy:x["a"],QDate:y["a"],QBtn:D["a"],QSpace:k["a"],QTable:q["a"]}),$()(C,"directives",{ClosePopup:h["a"]})}}]);