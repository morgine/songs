(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"862d0":function(a,i,t){"use strict";t.r(i);var e=function(){var a=this,i=a.$createElement,t=a._self._c||i;return t("q-page",{attrs:{padding:""}},[t("q-table",{attrs:{title:"公众号列表",data:a.data,columns:a.columns,"row-key":"id",pagination:a.pagination,loading:a.loading,"binary-state-sort":""},on:{"update:pagination":function(i){a.pagination=i},request:a.onRequest},scopedSlots:a._u([{key:"top-right",fn:function(){return[t("q-btn",{attrs:{flat:""},on:{click:a.resetApp}},[a._v("拉取公众号")]),t("q-btn",{attrs:{flat:""},on:{click:a.addApp}},[a._v("添加公众号")])]},proxy:!0}])})],1)},n=[],s=(t("a434"),t("ddb0"),{data(){return{loading:!1,pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:15,rowsNumber:10},columns:[{name:"id",align:"right",label:"ID",field:"ID",sortable:!0},{name:"Appid",align:"right",label:"Appid",field:"Appid"},{name:"NickName",align:"right",label:"NickName",field:"NickName"},{name:"HeadImg",align:"right",label:"HeadImg",field:"HeadImg"},{name:"UserName",align:"right",label:"UserName",field:"UserName"},{name:"PrincipalName",align:"right",label:"PrincipalName",field:"PrincipalName"},{name:"Alias",align:"right",label:"Alias",field:"Alias"},{name:"QrcodeUrl",align:"right",label:"QrcodeUrl",field:"QrcodeUrl"},{name:"Signature",align:"right",label:"Signature",field:"Signature"}],data:[],original:[]}},mounted(){this.count()},methods:{count(){this.loading=!0,this.$axios.get("/count-apps").then((a=>{a=a.data,a&&a.Data&&(this.pagination.rowsNumber=a.Data,this.onRequest({pagination:this.pagination})),this.loading=!1}))},onRequest(a){const{page:i,rowsPerPage:t,sortBy:e,descending:n}=a.pagination;this.loading=!0;const s=(i-1)*t,l={Limit:t,Offset:s};e&&(l.Column=e,l.Desc=n),this.$axios.get("/apps",{params:l}).then((a=>{a=a.data,a&&a.Data&&(this.data.splice(0,this.data.length,...a.Data),this.pagination.page=i,this.pagination.rowsPerPage=t,this.pagination.sortBy=e,this.pagination.descending=n,this.loading=!1)}))},addApp(){this.$axios.get("/app-authorizer-url").then((a=>{a=a.data,a&&a.Data&&window.open(a.Data,"_blank")}))},resetApp(){this.$q.dialog({title:"⚠️ 警告",message:"拉取当前开放平台下的所有授权公众号?",cancel:!0,persistent:!0}).onOk((()=>{this.$q.notify("操作中..."),this.$axios.get("/reset-apps").then((a=>{a=a.data,a.Message&&this.$q.notify(a.Message)}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}}),l=s,o=t("2877"),r=t("9989"),g=t("eaac"),d=t("9c40"),p=t("eebe"),c=t.n(p),h=Object(o["a"])(l,e,n,!1,null,"1814c094",null);i["default"]=h.exports;c()(h,"components",{QPage:r["a"],QTable:g["a"],QBtn:d["a"]})}}]);