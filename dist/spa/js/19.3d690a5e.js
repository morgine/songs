(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"2a45":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"row q-gutter-lg items-center"},[a("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("q-btn",{attrs:{label:"获取"},on:{click:t.getEvents}})],1),a("q-table",{staticClass:"q-mt-xl",attrs:{data:t.evtApps,columns:t.columns,"row-key":"Appid"}})],1)},n=[],o=(a("ddb0"),a("bd4c"));const r=Date.now();var l={name:"Event",data(){return{events:[],start:r,apps:[],evtApps:[],columns:[{name:"NickName",label:"公众号",field:"NickName"},{name:"Status",label:"状态",field:"Status"},{name:"TotalCount",label:"标签下的粉丝数",field:"TotalCount",sortable:!0},{name:"FilterCount",label:"接收到消息的粉丝数",field:"FilterCount",sortable:!0},{name:"SentCount",label:"总发送粉丝数",field:"SentCount",sortable:!0},{name:"ErrorCount",label:"发送失败粉丝数",field:"ErrorCount",sortable:!0}],loading:!1}},computed:{date:{get(){return o["b"].formatDate(this.start,"YYYY-MM-DD")},set(t){this.start=o["b"].extractDate(t,"YYYY-MM-DD")}}},created(){const t={Limit:2e3,Offset:0,Column:"id",Desc:!0,Selects:["appid","nick_name"]};this.$axios.get("/apps",{params:t}).then((t=>{t=t.data,t&&t.Data&&(this.apps=t.Data)}))},methods:{getEvents(){this.loading=!0,this.evtApps=[];const t=Math.ceil(o["b"].startOfDate(this.start,"day")/1e3);this.$axios.get("/app-group-msg-result",{params:{Start:t,End:t+86400}}).then((t=>{if(t=t.data,t&&t.Data){const e=[];for(const a of this.apps){const s={Appid:a.Appid,NickName:a.NickName,Status:"",TotalCount:0,FilterCount:0,SentCount:0,ErrorCount:0};for(const e of t.Data)if(e.Appid===a.Appid){s.Status=e.Status,s.TotalCount=e.TotalCount,s.FilterCount=e.FilterCount,s.SentCount=e.SentCount,s.ErrorCount=e.ErrorCount;break}e.push(s)}this.evtApps=e}this.loading=!1}))}}},i=l,p=a("2877"),c=a("9989"),u=a("27f9"),d=a("0016"),m=a("7cbe"),b=a("52ee"),f=a("9c40"),C=a("eaac"),h=a("7f67"),v=a("eebe"),D=a.n(v),g=Object(p["a"])(i,s,n,!1,null,"2438e45c",null);e["default"]=g.exports;D()(g,"components",{QPage:c["a"],QInput:u["a"],QIcon:d["a"],QPopupProxy:m["a"],QDate:b["a"],QBtn:f["a"],QTable:C["a"]}),D()(g,"directives",{ClosePopup:h["a"]})}}]);