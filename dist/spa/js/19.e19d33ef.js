(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"2a45":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"row q-gutter-lg items-center"},[a("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("q-btn",{attrs:{label:"获取"},on:{click:t.getEvents}})],1),a("q-table",{staticClass:"q-mt-xl",attrs:{data:t.evtApps,columns:t.columns,"row-key":"Appid"}})],1)},n=[],o=(a("ddb0"),a("bd4c"));const r=o["b"].startOfDate(Date.now(),"day"),i=864e5,l=r+i;var p={name:"Event",data(){return{events:[],start:r,end:l,apps:[],evtApps:[],columns:[{name:"NickName",label:"公众号",field:"NickName"},{name:"Status",label:"状态",field:"Status"},{name:"TotalCount",label:"标签下的粉丝数",field:"TotalCount",sortable:!0},{name:"FilterCount",label:"接收到消息的粉丝数",field:"FilterCount",sortable:!0},{name:"SentCount",label:"总发送粉丝数",field:"SentCount",sortable:!0},{name:"ErrorCount",label:"发送失败粉丝数",field:"ErrorCount",sortable:!0}],loading:!1}},computed:{date:{get(){return o["b"].formatDate(this.start,"YYYY-MM-DD")},set(t){this.start=o["b"].extractDate(t,"YYYY-MM-DD"),this.end=this.start+i}}},created(){const t={Limit:2e3,Offset:0,Column:"id",Desc:!0,Selects:["appid","nick_name"]};this.$axios.get("/apps",{params:t}).then((t=>{t=t.data,t&&t.Data&&(this.apps=t.Data)}))},methods:{getEvents(){this.loading=!0,this.evtApps=[],this.$axios.get("/app-group-msg-result",{params:{Start:Math.ceil(this.start/1e3),End:Math.ceil(this.end/1e3)}}).then((t=>{if(t=t.data,t&&t.Data){const e=[];for(const a of this.apps){const s={Appid:a.Appid,NickName:a.NickName,Status:"",TotalCount:0,FilterCount:0,SentCount:0,ErrorCount:0};for(const e of t.Data)if(e.Appid===a.Appid){s.Status=e.Status,s.TotalCount=e.TotalCount,s.FilterCount=e.FilterCount,s.SentCount=e.SentCount,s.ErrorCount=e.ErrorCount;break}e.push(s)}this.evtApps=e}this.loading=!1}))}}},c=p,u=a("2877"),d=a("9989"),m=a("27f9"),b=a("0016"),f=a("7cbe"),C=a("52ee"),h=a("9c40"),v=a("eaac"),D=a("7f67"),g=a("eebe"),k=a.n(g),S=Object(u["a"])(c,s,n,!1,null,"3d87b69b",null);e["default"]=S.exports;k()(S,"components",{QPage:d["a"],QInput:m["a"],QIcon:b["a"],QPopupProxy:f["a"],QDate:C["a"],QBtn:h["a"],QTable:v["a"]}),k()(S,"directives",{ClosePopup:D["a"]})}}]);